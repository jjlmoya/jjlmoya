---
import AppLayout from "../../layouts/AppLayout.astro";
import { dayCheck as app } from "../../data/apps/day-check";
import { Icon } from "astro-icon/components";
import AppVideos from "../../components/apps/AppVideos.astro";

const title = `Day Check: Contador de D√≠as ‚Äî ${app.tagline}`;


const months4Ago = new Date();
months4Ago.setMonth(months4Ago.getMonth() - 4);

const months3Future = new Date();
months3Future.setMonth(months3Future.getMonth() + 3);

const weeks2Ago = new Date();
weeks2Ago.setDate(weeks2Ago.getDate() - 14);

const cards = [
    {
        label: "D√≠as sin fumar üö≠",
        since: months4Ago.toISOString(),
        color: "from-[#1a3a35] to-[#0a1412]",
        accent: "#4ECDC4",
        emoji: "‚ú®",
        tag: "SALUD"
    },
    {
        label: "Viaje a Jap√≥n ‚úàÔ∏è",
        target: months3Future.toISOString(),
        color: "from-[#4a1a3a] to-[#1a0a1a]",
        accent: "#FF85E1",
        emoji: "üå∏",
        tag: "VIAJES"
    },
    {
        label: "Racha en el Gym üí™",
        since: weeks2Ago.toISOString(),
        color: "from-[#1a2a4a] to-[#0a0f1a]",
        accent: "#85B1FF",
        emoji: "üî•",
        tag: "FITNESS"
    }
];
---

<AppLayout
    title={title}
    description={app.description}
    image={app.media.icon}
    color={app.theme.primary}
    favicon={app.media.icon}
    currentSlug={app.slug}
>
    <div
        class="min-h-screen bg-[#020202] text-white selection:bg-[#B185FF] selection:text-white overflow-x-hidden font-sans"
        style={`--primary: ${app.theme.primary}; --accent: ${app.theme.accent};`}
    >
        {}
        <div class="fixed inset-0 pointer-events-none">
            <div
                class="absolute top-[5%] left-[10%] w-[500px] h-[500px] bg-[#B185FF] opacity-[0.08] blur-[150px] rounded-full"
            >
            </div>
            <div
                class="absolute bottom-[5%] right-[10%] w-[400px] h-[400px] bg-[#4ECDC4] opacity-[0.05] blur-[120px] rounded-full"
            >
            </div>
            <div class="absolute inset-0 opacity-20"></div>
        </div>

        {}
        <section class="relative pt-20 px-6">
            <div class="max-w-7xl mx-auto flex flex-col items-center text-center">
                <div
                    class="inline-flex items-center gap-3 px-4 py-2 rounded-full bg-white/5 border border-white/10 mb-12 backdrop-blur-md"
                >
                    <img src={app.media.icon} alt="Icon" class="w-6 h-6 rounded-lg" />
                    <span class="text-[10px] font-black uppercase tracking-[0.3em] text-[#B185FF]"
                        >Day Check: Contador de D√≠as</span
                    >
                </div>
                
                <h1 class="text-4xl sm:text-7xl md:text-9xl font-black tracking-tighter mb-8 leading-[0.85]">
                    Cada <span class="text-white/30 italic">segundo</span><br/>es una victoria.
                </h1>
                
                <p
                    class="text-xl md:text-3xl font-light text-white/50 max-w-2xl mb-16 leading-relaxed"
                >
                    Visualiza tus metas y celebra tus rachas con la herramienta m√°s elegante de la Store.
                </p>

                <div class="flex flex-wrap justify-center gap-6 mb-24">
                    {
                        app.stores.googlePlay && (
                            <a
                                href={app.stores.googlePlay}
                                target="_blank"
                                class="premium-btn group"
                            >
                                <Icon name="mdi:google-play" class="w-6 h-6 mr-3" />
                                <span>Play Store</span>
                            </a>
                        )
                    }
                </div>
            </div>
        </section>

        {}
        <section class="py-10 px-6">
            <div class="max-w-xl mx-auto space-y-6 relative">
                
                {
                    cards.map((card, i) => (
                        <div
                            class={`live-app-card bg-gradient-to-br ${card.color} border border-white/10 rounded-[2.5rem] p-8 md:p-10 relative overflow-hidden group shadow-[0_30px_60px_-15px_rgba(0,0,0,0.8)]`}
                            style={`--card-accent: ${card.accent}`}
                        >
                            <div class="absolute left-0 top-1/4 bottom-1/4 w-1.5 bg-[var(--card-accent)] rounded-r-full shadow-[4px_0_15px_var(--card-accent)]"></div>
                            
                            <div class="flex justify-between items-start mb-4">
                                <div class="flex flex-col">
                                    <span class="text-[10px] font-black uppercase tracking-[0.2em] text-white/50">
                                        {card.since ? "DESDE EL" : "FALTAN"}
                                    </span>
                                    <span class="text-[11px] font-black text-white/40 mt-1 uppercase tracking-widest bg-black/20 px-2 py-0.5 rounded-md inline-block w-fit">
                                        {new Date(card.since || card.target!).toLocaleDateString("es-ES", {
                                                  month: 'short',
                                                  day: '2-digit',
                                                  year: 'numeric',
                                              })}
                                    </span>
                                </div>
                                <span class="text-4xl translate-y-[-5px] group-hover:scale-125 group-hover:rotate-12 transition-all duration-500 drop-shadow-[0_0_10px_rgba(255,255,255,0.3)]">
                                    {card.emoji}
                                </span>
                            </div>

                            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-8">
                                <div class="flex flex-col">
                                    <div class="flex items-baseline gap-3">
                                        <span
                                            class="text-6xl md:text-8xl font-black live-counter-days leading-none text-white"
                                            data-date={card.since || card.target}
                                            data-type={card.since ? "since" : "target"}
                                        >
                                            0
                                        </span>
                                        <span class="text-sm font-black uppercase tracking-[0.2em] text-white/60">
                                            D√≠as
                                        </span>
                                    </div>
                                    <div class="flex gap-4 mt-6">
                                        <div class="flex flex-col">
                                            <span class="text-[20px] font-black text-white live-counter-hours" data-date={card.since || card.target} data-type={card.since ? "since" : "target"}>0</span>
                                            <span class="text-[8px] font-black text-white/40 uppercase tracking-widest">Horas</span>
                                        </div>
                                        <div class="flex flex-col">
                                            <span class="text-[20px] font-black text-white live-counter-mins" data-date={card.since || card.target} data-type={card.since ? "since" : "target"}>0</span>
                                            <span class="text-[8px] font-black text-white/40 uppercase tracking-widest">Mins</span>
                                        </div>
                                        <div class="flex flex-col">
                                            <span class="text-[20px] font-black text-[var(--card-accent)] live-counter-secs" data-date={card.since || card.target} data-type={card.since ? "since" : "target"}>0</span>
                                            <span class="text-[8px] font-black text-[var(--card-accent)] opacity-60 uppercase tracking-widest">Segs</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="text-left sm:text-right">
                                    <h3 class="text-2xl md:text-3xl font-black leading-[1.1] tracking-tighter text-white group-hover:text-[var(--card-accent)] transition-colors uppercase italic max-w-[180px] sm:ml-auto">
                                        {card.label}
                                    </h3>
                                </div>
                            </div>

                            {}
                            <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-white/5 rounded-full blur-3xl group-hover:bg-[var(--card-accent)]/10 transition-colors" />
                        </div>
                    ))
                }

                {}
                <div class="live-app-card bg-[#111] border-2 border-dashed border-white/10 rounded-[2.5rem] p-12 relative overflow-hidden text-center group">
                    <div class="flex flex-col items-center">
                         <span class="text-[10px] font-black uppercase tracking-[0.4em] text-[#B185FF] mb-6">ESTADO: URGENTE</span>
                         <h3 class="text-3xl font-black uppercase italic mb-10 leading-none">Tiempo para que uses<br/><span class="text-white">Day Check: Contador de D√≠as</span></h3>
                         
                         <div class="flex gap-10 mb-12">
                             <div class="flex flex-col">
                                <span class="text-6xl font-black text-white/20">0</span>
                                <span class="text-[9px] font-black opacity-30 mt-2 uppercase tracking-widest">D√≠as</span>
                             </div>
                             <div class="flex flex-col">
                                <span class="text-6xl font-black text-white/20">0</span>
                                <span class="text-[9px] font-black opacity-30 mt-2 uppercase tracking-widest">Horas</span>
                             </div>
                             <div class="flex flex-col">
                                <span class="text-6xl font-black text-[#B185FF] animate-pulse">0</span>
                                <span class="text-[9px] font-black text-[#B185FF] opacity-50 mt-2 uppercase tracking-widest">Segs</span>
                             </div>
                         </div>
                         
                         <a href={app.stores.googlePlay} target="_blank" class="px-12 py-4 bg-white text-black rounded-2xl font-black uppercase tracking-[0.2em] text-xs hover:scale-110 active:scale-95 transition-all shadow-[0_15px_30px_rgba(255,255,255,0.1)]">
                            Hazlo ahora
                         </a>
                    </div>
                </div>
            </div>
        </section>

        {}
        <section class="py-10 px-6">
            <div class="max-w-7xl mx-auto mb-20 text-center">
                <div class="h-px w-20 bg-[#B185FF] mx-auto mb-12"></div>
                <h2 class="text-4xl md:text-7xl font-black italic uppercase leading-none mb-8">
                    Psicolog√≠a del <span class="text-[#B185FF]">H√°bito.</span>
                </h2>
                <p class="text-xl md:text-2xl text-white/40 font-light leading-relaxed max-w-3xl mx-auto tracking-tight">
                    <strong class="text-white">Day Check: Contador de D√≠as</strong> utiliza el refuerzo visual para transformar la disciplina en un juego de superaci√≥n. Cada segundo es una prueba de tu compromiso.
                </p>
            </div>

            <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
                {
                    app.benefits.map((b) => (
                        <div class="p-10 rounded-[2.5rem] bg-white/[0.03] border border-white/5 hover:border-[#B185FF]/20 transition-all group">
                            <Icon name={b.icon} class="w-8 h-8 text-[#B185FF] mb-8 group-hover:scale-110 transition-transform" />
                            <h4 class="text-lg font-black uppercase mb-4 tracking-tighter">{b.title}</h4>
                            <p class="text-sm text-white/30 leading-relaxed font-light">{b.text}</p>
                        </div>
                    ))
                }
            </div>
        </section>

        {}
        <AppVideos videos={app.videos || []} color="#B185FF" title="La App Real" />

        {}
        <section class="py-48 px-6 text-center">
            <div class="max-w-5xl mx-auto relative">
                <div
                    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-[#B185FF] opacity-[0.1] blur-[100px]"
                >
                </div>

                <div class="live-app-card bg-gradient-to-br from-[#121215] to-[#050505] border border-white/10 rounded-[4rem] p-12 md:p-20 relative overflow-hidden group shadow-[0_50px_100px_-20px_rgba(0,0,0,1)] text-center">
                     <div class="relative z-10">
                         <span class="text-[14px] font-black uppercase tracking-[0.6em] text-[#B185FF] mb-8 block">DISPONIBLE AHORA</span>
                         
                         <h2 class="text-6xl md:text-8xl font-black tracking-tighter uppercase italic leading-[0.85] text-white mb-12">
                             Domina tu<br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-[#B185FF] to-[#4ECDC4]">Tiempo.</span>
                         </h2>
                         
                         <p class="text-xl md:text-2xl font-light text-white/40 max-w-2xl mx-auto mb-16 leading-relaxed">
                             Empieza hoy mismo a visualizar tus metas con <strong class="text-white">Day Check: Contador de D√≠as</strong>.
                         </p>
                         
                         {app.stores.googlePlay && (
                             <a href={app.stores.googlePlay} target="_blank" class="day-btn group">
                                 <span>Descargar ahora</span>
                                 <Icon name="mdi:arrow-right" class="w-5 h-5 ml-2 group-hover:translate-x-2 transition-transform" />
                             </a>
                         )}
                     </div>
                     
                     <div class="absolute inset-x-0 bottom-0 h-1.5 bg-gradient-to-r from-[#B185FF] via-[#4ECDC4] to-[#B185FF] opacity-30 group-hover:opacity-100 transition-opacity duration-700"></div>
                </div>
            </div>
        </section>
    </div>
</AppLayout>

<script>
    function updateLiveCounters() {
        const containers = document.querySelectorAll(".live-counter-days");

        containers.forEach((counter) => {
            const dateStr = counter.getAttribute("data-date");
            const type = counter.getAttribute("data-type");
            const targetDate = new Date(dateStr!).getTime();
            const now = new Date().getTime();

            let diff = type === "since" ? now - targetDate : targetDate - now;
            if (diff < 0) diff = 0;

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            const parent = counter.closest(".live-app-card");
            if (parent) {
                const daysEl = parent.querySelector(".live-counter-days") as HTMLElement;
                const hoursEl = parent.querySelector(".live-counter-hours") as HTMLElement;
                const minsEl = parent.querySelector(".live-counter-mins") as HTMLElement;
                const secsEl = parent.querySelector(".live-counter-secs") as HTMLElement;

                if (daysEl) daysEl.innerText = d.toString();
                if (hoursEl) hoursEl.innerText = h.toString();
                if (minsEl) minsEl.innerText = m.toString();
                if (secsEl) secsEl.innerText = s.toString();
            }
        });
    }

    setInterval(updateLiveCounters, 1000);
    updateLiveCounters();
</script>

<style>
    .premium-btn {
        display: inline-flex;
        align-items: center;
        padding: 1.25rem 3rem;
        background: white;
        color: black;
        border-radius: 1.25rem;
        font-weight: 950;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-size: 0.9rem;
        transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        border: 2px solid white;
    }
    .premium-btn:hover {
        background: transparent;
        color: white;
        transform: translateY(-5px);
        box-shadow: 0 20px 50px -10px rgba(177, 133, 255, 0.4);
    }

    .day-btn {
        display: inline-flex;
        align-items: center;
        padding: 0.85rem 2.5rem;
        background: #b185ff;
        color: white;
        border-radius: 100px;
        font-weight: 950;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-size: 0.85rem;
        transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    }
    .day-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 15px 30px -5px rgba(177, 133, 255, 0.4);
        background: white;
        color: black;
    }

    .day-btn-xl {
        display: inline-flex;
        align-items: center;
        padding: 1.5rem 3.5rem;
        background: #b185ff;
        color: white;
        border-radius: 100px;
        font-weight: 950;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        font-size: 1rem;
        transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .live-app-card {
        transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
    }
    .live-app-card:hover {
        transform: scale(1.02) translateY(-5px);
        box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.9);
        border-color: rgba(255, 255, 255, 0.4);
    }

    @media (max-width: 640px) {
        .live-app-card {
            padding: 2rem !important;
        }
        .live-counter-days {
            font-size: 4rem !important;
        }
        .day-btn {
            padding: 1rem 2rem;
            font-size: 0.75rem;
        }
    }
</style>


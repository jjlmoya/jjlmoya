---
import LayoutUtility from "../../layouts/LayoutUtility.astro";
import UtilityHeader from "../../components/utilidades/UtilityHeader.astro";

import VitruvianColumn from "../../components/utilidades/morteros/VitruvianColumn.astro";
import MaterialControls from "../../components/utilidades/morteros/MaterialControls.astro";
import LivingWall from "../../components/utilidades/morteros/LivingWall.astro";
import GranulometrySection from "../../components/utilidades/morteros/GranulometrySection.astro";
import EducationalSection from "../../components/utilidades/morteros/EducationalSection.astro";
import "../../styles/morteros.css";
const faqItems = [
    {
        question: "¿Por qué usar cal en lugar de cemento?",
        answer: "La cal es un material 'vivo' y transpirable que permite la evacuación del vapor de agua, evitando humedades por condensación. Además, es más flexible que el cemento, lo que reduce la aparición de grietas en muros antiguos.",
    },
    {
        question: "¿Cuál es la proporción ideal para un enfoscado?",
        answer: "Según la tradición vitruviana, para arena de río limpia se usa una proporción de 1:3 (una parte de cal por tres de arena). Para arena de mina, se recomienda 1:2 para asegurar la cohesión del mortero.",
    },
    {
        question: "¿Qué es el revoco fino o enlucido?",
        answer: "Es la última capa del muro. Se usa una arena mucho más fina (polvo de mármol en ocasiones) y una mayor proporción de cal para obtener un acabado liso y sedoso que puede ser pintado o dejado al natural.",
    },
    {
        question: "¿Cuánto tiempo tarda en endurecer el mortero de cal?",
        answer: "La cal aérea endurece por carbonatación (absorbiendo CO2 del aire). El proceso inicial de fraguado es de unos días, pero la dureza máxima se alcanza meses después, ganando resistencia con el paso de los años.",
    },
];

const howToSteps = [
    {
        name: "Identificar el tipo de soporte",
        text: "Comprueba si vas a trabajar sobre piedra, ladrillo antiguo o bloque. El soporte debe estar limpio y ligeramente húmedo.",
    },
    {
        name: "Elegir la granulometría de la arena",
        text: "Usa arena gruesa para la capa de agarre y arena fina para el acabado cosmético. La pureza de la arena define la calidad del mortero.",
    },
    {
        name: "Mezcla de componentes",
        text: "Mezcla la cal y la arena en seco antes de añadir agua. La consistencia debe ser plástica, no líquida.",
    },
    {
        name: "Aplicación y fratasado",
        text: "Extiende el mortero con llana y usa un fratas para igualar la superficie cuando el mortero empiece a tirar (endurecerse superficialmente).",
    },
];
---

<LayoutUtility
    title="Proporciones Morteros de Cal Tradicionales: Enfoscados y Revocos"
    description="Calculadora gratuita para morteros de cal y arena. Obtén las proporciones exactas para enfoscados, revocos y enlucidos según métodos tradicionales (Vitruvio)"
    image="/images/utilities/morteros.webp"
    gradientFrom="from-purple-100"
    faqItems={faqItems}
    howToSteps={howToSteps}
>
    <div slot="header">
        <UtilityHeader
            titleHighlight="Vitruvio"
            titleBase="La Calculadora"
            description="El arte de la proporción según el Libro VII. Descubre cuánto muro puedes restaurar con los materiales que tienes."
            gradientFrom="from-amber-600"
            gradientTo="to-stone-600"
            reverse={true}
        />
    </div>

    <div class="vitruvian-container relative">
        <div class="vitruvian-bg"></div>

        <div class="vitruvian-canvas">
            <VitruvianColumn />

            <MaterialControls />

            <LivingWall />
        </div>
    </div>

    <div slot="seo">
        <GranulometrySection />
        <EducationalSection />
    </div>
</LayoutUtility>

<script>
    import { MortarController } from "../../lib/morteros/MortarController";

    function init() {
        console.log("Initializing MortarController...");
        try {
            new MortarController();
            console.log("MortarController initialized successfully.");
        } catch (e) {
            console.error("Error initializing MortarController:", e);
        }
    }

    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
    } else {
        init();
    }
</script>

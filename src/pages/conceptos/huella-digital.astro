---
export const prerender = true;
import Layout from "../../layouts/Layout.astro";
import { Icon } from "astro-icon/components";

const internalReports = [
    {
        id: "EXP-001/ALPHA",
        title: "La Naturaleza Involuntaria del Rastro",
        sections: [
            {
                subtitle: "I. El Fenómeno de la Emisión Pasiva",
                content:
                    "Existir en la red no es un acto de voluntad, sino una consecuencia técnica de la interconectividad. La huella digital no es algo que 'hacemos', es algo que 'emana' de nuestra interacción con el silicio. Cada paquete de datos que viaja desde su terminal hacia jjlmoya.es lleva consigo una confesión involuntaria: la marca de su sistema, la resolución de su mirada y el lenguaje en el que sus procesos conversan. En la física de la información, el silencio absoluto no existe; el vacío siempre es rellenado por metadatos.",
            },
            {
                subtitle: "II. La Disolución del Individuo en el Dato",
                content:
                    "Al cruzar el umbral de este nodo, su nombre, su historia y su ego son filtrados por el servidor. Para nosotros, usted ha dejado de ser una entidad biológica con aspiraciones para convertirse en un Identificador de Sujeto (SR-XXXX). Esta reducción no es un acto de crueldad, sino de purificación burocrática. En el Registro de Permanencia, todos los sujetos son iguales ante la ley del hash. Su color, aunque aparentemente único, es simplemente el resultado de una función matemática que traduce su existencia técnica en una frecuencia cromática fija.",
            },
            {
                subtitle: "III. La Persistencia del Eco",
                content:
                    "Lo que usted ve en la cuadrícula superior es el registro de la permanencia. A diferencia de un libro de visitas tradicional, donde se requiere el gesto activo de escribir, aquí el gesto es la mera presencia. Su huella se ha consolidado antes de que usted pudiese decidir si quería dejarla. Es una memoria colectiva construida a base de transiciones fortuitas. El servidor no olvida; el servidor acumula capas de presencia, creando un estrato geológico de visitas que habitarán jjlmoya.es mucho después de que usted cierre esta pestaña.",
            },
        ],
    },
    {
        id: "EXP-002/BETA",
        title: "La Moralidad del Censo Invisible",
        sections: [
            {
                subtitle: "I. El Contrato de Navegación",
                content:
                    "Navegar es aceptar un contrato de vigilancia mutua. Usted observa el contenido, el servidor observa su observación. En jjlmoya.es, hemos querido transparentar este proceso. No ocultamos los logs en archivos oscuros dentro del root; los exponemos en la galería principal. Queremos que el sujeto sea consciente de que está siendo registrado, clasificado y almacenado. La honestidad de la burocracia reside en no ocultar sus métodos.",
            },
            {
                subtitle: "II. La Ética de la Insignificancia",
                content:
                    "¿Qué valor tiene un solo pixel en un mar de millones? Al ser transformado en un código hexadecimal, el sujeto adquiere la libertad de la insignificancia. Usted es un dato más, una estadística, una tendencia. En este gran censo, ya no tiene la presión de ser extraordinario. Es parte del 40% que usa Chrome, del 15% que navega desde un entorno móvil. La estadística es el refugio definitivo frente a la exposición individual.",
            },
            {
                subtitle: "III. El Protocolo de Salvaguarda",
                content:
                    "Aseguramos al sujeto que su rastro no será utilizado para fines comerciales. No nos interesa su comportamiento para venderle nada; nos interesa su presencia para poblar el vacío. El Registro de Permanencia es un experimento artístico-burocrático sobre la soledad compartida. Miles de personas que nunca se conocerán, tocándose a través de una cuadrícula de color. Es la democracia del bit, donde el costo de la entrada es solo un rastro técnico.",
            },
        ],
    },
    {
        id: "EXP-003/GAMMA",
        title: "Manual de Permanencia y Legado",
        sections: [
            {
                subtitle: "I. La Cápsula del Tiempo Técnica",
                content:
                    "Su arquitectura actual —su sistema operativo, su navegador, su resolución— es un fósil en potencia. Dentro de diez años, los metadatos que hoy registramos serán la arqueología de una era informática primitiva. Al consolidar su huella hoy, está enviando un mensaje al futuro: 'Esta era la tecnología en la que yo respiraba digitalmente en 2025'. Su color será el pigmento que usemos para pintar la historia de jjlmoya.es.",
            },
            {
                subtitle: "II. El Derecho a la Permanencia",
                content:
                    "Frente al contenido efímero de las redes sociales, defendemos la perdurabilidad del metadato. Las historias desaparecen, pero la base de datos es el templo de nuestra civilización. Este expediente no es una curiosidad; es una entrada en los anales de este laboratorio. Reclamamos el derecho a que su rastro persista como una marca de agua en la infraestructura de la red.",
            },
            {
                subtitle: "III. La Conclusión del Trámite",
                content:
                    "Al llegar al final de este scroll, habrá cumplido con su deber de presencia. Habrá visto el rastro de otros y habrá reconocido la suya propia en la sección de 'Auditoría'. No hay más pasos. Su existencia ha sido validada, su color ha sido asignado y su expediente ha sido archivado. Puede retirarse con la tranquilidad de que su paso por aquí ha dejado una mella permanente, por pequeña que sea.",
            },
        ],
    },
    {
        id: "EXP-004/DELTA",
        title: "Anexo: La Belleza del Algoritmo Ciego",
        sections: [
            {
                subtitle: "I. El Arte de la Función Hash",
                content:
                    "No hay un artista eligiendo colores; hay una función matemática procesando su identidad técnica. El azar no existe aquí, solo la causalidad. Si su resolución fuese un pixel mayor, su color sería radicalmente distinto. Esta fragilidad cromática es lo que hace que el Registro de Permanencia sea una obra de arte generativa viva. Cada visita cambia la composición del mural colectivo.",
            },
            {
                subtitle: "II. La Vecindad del Rastro",
                content:
                    "Observe quién está a su lado en la cuadrícula. Quizás un diseñador de Tokyo, un estudiante de Madrid o un servidor automatizado de San Francisco. En el censo, las fronteras físicas desaparecen. Estamos todos habitando el mismo espacio de memoria, separados solo por unos bytes de distancia. Es la verdadera red social: la que ocurre sin palabras, a través de la mera coincidencia técnica.",
            },
            {
                subtitle: "III. Última Advertencia",
                content:
                    "Al cerrar esta pestaña, el hilo de comunicación se corta, pero el rastro persiste. No intente borrar su huella; es el precio de la visibilidad. Acepte su transformación en dato y disfrute de la paz que otorga saberse registrado. El proceso ha finalizado. El expediente se cierra aquí.",
            },
        ],
    },
];
---

<Layout
    title="REGISTRO CENTRAL DE HUELLAS // ARCHIVO NACIONAL"
    description="Expediente burocrático-artístico sobre la persistencia técnica involuntaria. Archivo Nacional de Metadatos."
    image="/images/concepts/huella_digital_og.webp"
    bodyClass="!bg-[#f4f1ea] text-[#1a1a1a] font-sans selection:bg-black selection:text-white"
    showBackground={false}
    mainClass="pt-0 px-0"
>
    <style is:global>
        body {
            background-color: #f4f1ea !important;
        }
    </style>

    <div
        class="fixed inset-0 pointer-events-none opacity-[0.08] z-50 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"
    >
    </div>

    <main class="min-h-screen bg-[#f4f1ea] flex flex-col items-center">
        <header
            class="w-full max-w-6xl mt-32 px-8 py-16 border-b-4 border-black bg-white/40 relative overflow-hidden"
        >
            <div
                class="absolute top-0 right-0 p-8 flex flex-col items-center md:items-end opacity-20 select-none w-full md:w-auto"
            >
                <span class="text-xs font-mono font-bold tracking-tighter"
                    >COD_ARCH: 998-X-2025</span
                >
                <span class="text-[8px] font-mono">PROTOCOLO_ALFA_SEGURO</span>
            </div>

            <div
                class="flex flex-col md:flex-row justify-center md:justify-between items-center md:items-end text-center md:text-left gap-12 relative z-10"
            >
                <div class="space-y-6">
                    <div class="flex items-center justify-center md:justify-start gap-3">
                        <div class="w-4 h-4 bg-black"></div>
                        <span class="text-[11px] font-mono font-black tracking-[0.4em] uppercase"
                            >Registro Nacional de Presencias Involuntarias</span
                        >
                    </div>
                    <h1
                        class="text-[12vw] sm:text-7xl md:text-[9vw] font-black tracking-tighter uppercase leading-[0.9] md:leading-[0.8] italic group cursor-default"
                    >
                        La Huella<br /><span
                            class="text-transparent border-text-black font-light opacity-80 group-hover:opacity-100 transition-opacity"
                            >Digital</span
                        >
                    </h1>
                </div>

                <div class="flex flex-col items-center gap-4">
                    <div class="relative w-32 h-32 flex items-center justify-center">
                        <div
                            class="absolute inset-0 rounded-full border-2 border-dashed border-black/20 animate-[spin_20s_linear_infinite]"
                        >
                        </div>
                        <div class="text-center">
                            <span
                                id="total-census"
                                class="text-5xl font-black font-mono leading-none tracking-tighter"
                                >----</span
                            >
                            <p class="text-[8px] font-mono font-bold uppercase mt-1 opacity-40">
                                Sujetos
                            </p>
                        </div>
                    </div>
                    <div
                        class="px-4 py-1 bg-black text-white text-[9px] font-mono font-bold uppercase tracking-widest"
                    >
                        Estado: Operativo
                    </div>
                </div>
            </div>
        </header>

        <section class="w-full max-w-6xl px-8 py-24 space-y-16">
            <div
                class="flex flex-col md:flex-row justify-between items-center gap-8 border-b-2 border-black pb-8"
            >
                <div class="space-y-2">
                    <h2 class="text-2xl font-black uppercase italic tracking-tighter">
                        Registro de Permanencia
                    </h2>
                    <p class="text-[10px] font-mono font-bold uppercase opacity-40">
                        Visualización colectiva de metadatos consolidados [Solo un rastro por
                        individuo]
                    </p>
                </div>
                <div class="flex items-center gap-4 bg-black/5 px-4 py-2 border border-black/10">
                    <div class="w-2 h-2 rounded-full bg-red-600 animate-pulse"></div>
                    <span class="text-[9px] font-mono font-bold uppercase tracking-widest"
                        >Monitorización en Tiempo Real</span
                    >
                </div>
            </div>

            <div
                id="data-archive"
                class="grid grid-cols-20 sm:grid-cols-30 md:grid-cols-50 content-start gap-px sm:gap-[2px] p-2 bg-white/20 border-2 border-black/5 min-h-[300px] md:min-h-[600px] shadow-inner relative group"
            >
                <div
                    id="archive-loader"
                    class="absolute inset-0 flex flex-col items-center justify-center gap-6 z-10 bg-[#f4f1ea]/50 backdrop-blur-[2px]"
                >
                    <div class="relative w-16 h-16">
                        <div class="absolute inset-0 border-4 border-black/10 rounded-full"></div>
                        <div
                            class="absolute inset-0 border-4 border-black border-t-transparent rounded-full animate-spin"
                        >
                        </div>
                    </div>
                    <div class="flex flex-col items-center gap-2">
                        <span
                            class="text-[10px] font-mono font-black animate-pulse tracking-widest uppercase"
                            >Recuperando Archivo</span
                        >
                        <div class="flex gap-1">
                            <div class="w-1 h-1 bg-black animate-bounce [animation-delay:-0.3s]">
                            </div>
                            <div class="w-1 h-1 bg-black animate-bounce [animation-delay:-0.15s]">
                            </div>
                            <div class="w-1 h-1 bg-black animate-bounce"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex flex-col items-center gap-4">
                <p
                    class="text-[9px] font-mono font-bold uppercase tracking-widest text-black/30 border-x border-black/10 px-8 text-center"
                >
                    Trámite obligatorio: Haga clic en un rastro para iniciar auditoría individual
                </p>
                <p class="text-[8px] font-mono font-bold uppercase text-red-600/40">
                    * El registro es inmutable: Solo se conserva la primera huella detectada por
                    sujeto.
                </p>
            </div>
        </section>

        <div
            id="inspector-card"
            class="hidden fixed inset-0 z-[150] bg-[#f4f1ea] p-6 lg:p-12 overflow-hidden animate-in fade-in slide-in-from-bottom-8 duration-500"
        >
            <div class="max-w-7xl mx-auto w-full h-full flex flex-col justify-center">
                <div
                    class="flex justify-between items-start border-b-[6px] border-black pb-4 mb-8 lg:mb-12 shrink-0"
                >
                    <div class="space-y-2">
                        <div class="flex items-center gap-3">
                            <div class="w-4 h-4 bg-red-600 animate-pulse"></div>
                            <p
                                class="text-[10px] md:text-[12px] font-mono font-black uppercase tracking-[0.4em]"
                            >
                                Expediente de Auditoría Individual
                            </p>
                        </div>
                        <h2
                            id="insp-id"
                            class="text-4xl md:text-6xl lg:text-7xl font-black font-mono tracking-tighter uppercase italic leading-none"
                        >
                            SR-XXXXX
                        </h2>
                    </div>
                    <button
                        id="close-inspector"
                        class="bg-black text-white px-6 py-3 text-[10px] md:text-xs font-mono font-black hover:bg-red-600 transition-all hover:scale-110 active:scale-95 uppercase tracking-widest shrink-0"
                    >
                        Cerrar [ESC]
                    </button>
                </div>

                <div
                    class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-24 items-center min-h-0 flex-grow overflow-hidden"
                >
                    <div class="relative group h-full flex items-center justify-center min-h-0">
                        <div
                            id="insp-color"
                            class="h-full aspect-square max-w-full max-h-full border-[8px] lg:border-[12px] border-black shadow-[20px_20px_0px_rgba(0,0,0,0.05)] transition-transform duration-700"
                        >
                        </div>
                        <div
                            class="absolute bottom-2 right-2 md:-bottom-6 md:-right-6 bg-black text-white px-3 py-1 md:px-4 md:py-2 text-[8px] md:text-[10px] font-mono font-bold uppercase tracking-widest"
                        >
                            Ref_Cromática_01
                        </div>
                    </div>

                    <div class="flex flex-col justify-center space-y-6 lg:space-y-12 min-h-0">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-12 font-mono">
                            <div class="space-y-1 border-l-4 border-black/10 pl-4 lg:pl-6">
                                <p
                                    class="text-[9px] md:text-[10px] font-black uppercase opacity-40 tracking-widest"
                                >
                                    Plataforma Detectada
                                </p>
                                <p
                                    id="insp-os"
                                    class="text-base md:text-lg lg:text-2xl font-black uppercase break-words"
                                >
                                    ---
                                </p>
                            </div>
                            <div class="space-y-1 border-l-4 border-black/10 pl-4 lg:pl-6">
                                <p
                                    class="text-[9px] md:text-[10px] font-black uppercase opacity-40 tracking-widest"
                                >
                                    Punto de Acceso
                                </p>
                                <p
                                    id="insp-path"
                                    class="text-base md:text-lg lg:text-2xl font-black uppercase break-words"
                                >
                                    ---
                                </p>
                            </div>
                            <div class="space-y-1 border-l-4 border-black/10 pl-4 lg:pl-6">
                                <p
                                    class="text-[9px] md:text-[10px] font-black uppercase opacity-40 tracking-widest"
                                >
                                    Marca Temporal
                                </p>
                                <p
                                    id="insp-time"
                                    class="text-base md:text-lg lg:text-2xl font-black uppercase break-words"
                                >
                                    ---
                                </p>
                            </div>
                            <div class="space-y-1 border-l-4 border-black/10 pl-4 lg:pl-6">
                                <p
                                    class="text-[9px] md:text-[10px] font-black uppercase opacity-40 tracking-widest"
                                >
                                    Estado del Sujeto
                                </p>
                                <p
                                    class="text-base md:text-lg lg:text-2xl font-black uppercase text-green-600"
                                >
                                    Archivado
                                </p>
                            </div>
                        </div>

                        <div
                            class="p-4 md:p-6 lg:p-8 bg-black/5 border-2 border-black/10 space-y-4"
                        >
                            <p
                                class="text-[9px] md:text-[10px] lg:text-xs font-mono font-bold leading-relaxed opacity-60"
                            >
                                NOTA DE SEGURIDAD: Los datos mostrados arriba han sido extraídos
                                automáticamente mediante protocolos de captura pasiva. La
                                persistencia de esta huella es de carácter permanente en la base de
                                datos central de jjlmoya.es.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section
            class="w-full py-48 bg-black text-white flex justify-center relative overflow-hidden"
        >
            <div
                class="absolute inset-0 opacity-10 pointer-events-none grayscale contrast-150 mix-blend-overlay"
            >
                <div
                    class="w-full h-full bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"
                >
                </div>
            </div>

            <div
                class="max-w-4xl w-full px-8 grid grid-cols-1 lg:grid-cols-12 gap-16 items-center relative z-10"
            >
                <div class="lg:col-span-12 mb-12 text-center">
                    <span class="text-xs font-mono font-bold tracking-[0.6em] uppercase opacity-40"
                        >SECCIÓN 02 // Auditoría Interna</span
                    >
                    <h2
                        class="text-4xl sm:text-5xl md:text-7xl font-black uppercase tracking-tighter italic mt-4"
                    >
                        Usted es su Propio Rastro
                    </h2>
                </div>

                <div
                    class="lg:col-span-7 p-12 border-2 border-white/20 bg-white/5 backdrop-blur-sm space-y-12"
                >
                    <div class="space-y-10">
                        <div>
                            <p class="text-[10px] font-mono font-bold uppercase opacity-30 mb-2">
                                Identificador Gubernamental
                            </p>
                            <p
                                id="user-id"
                                class="text-5xl font-black font-mono tracking-tighter text-yellow-400"
                            >
                                SR-XXXXX
                            </p>
                        </div>
                        <div class="grid grid-cols-2 gap-10 font-mono text-[10px] uppercase">
                            <div class="space-y-1">
                                <p class="opacity-30">Cromatismo</p>
                                <p id="user-hex" class="font-bold text-lg">#FFFFFF</p>
                            </div>
                            <div class="space-y-1">
                                <p class="opacity-30">Procedencia</p>
                                <p id="user-os" class="font-bold text-lg">UNKN-OS</p>
                            </div>
                        </div>
                    </div>
                    <div class="pt-8 border-t border-white/10 flex items-center gap-4">
                        <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                        <p class="text-[9px] font-mono font-bold uppercase tracking-widest">
                            Sujeto verificado y archivado con éxito.
                        </p>
                    </div>
                </div>

                <div class="lg:col-span-5 flex flex-col items-center gap-6">
                    <div
                        id="user-aura"
                        class="w-full aspect-square border-8 border-white shadow-[0_0_100px_rgba(255,255,255,0.1)]"
                    >
                    </div>
                    <p
                        class="text-[10px] font-mono font-bold uppercase tracking-widest text-center opacity-40"
                    >
                        Su huella cromática en jjlmoya.es
                    </p>
                </div>
            </div>
        </section>

        <section class="w-full max-w-6xl px-8 py-24 lg:py-64 bg-[#f4f1ea]">
            <div class="space-y-24 lg:space-y-64">
                {
                    internalReports.map((report, idx) => (
                        <article class="grid grid-cols-1 lg:grid-cols-12 gap-20 relative group">
                            <div class="lg:col-span-4 relative lg:sticky lg:top-48 self-start space-y-8">
                                <div class="flex items-center gap-4 pb-4 border-b-2 border-black/10">
                                    <span class="text-xs font-mono font-black bg-black text-white px-2 py-0.5">
                                        {report.id}
                                    </span>
                                    <span class="text-[9px] font-mono font-bold uppercase opacity-30">
                                        Informe Confidencial
                                    </span>
                                </div>
                                <h3 class="text-3xl sm:text-5xl font-black tracking-tighter uppercase leading-tight md:leading-[0.85] italic group-hover:translate-x-2 transition-transform duration-500">
                                    {report.title}
                                </h3>
                                <div class="w-16 h-1 bg-black" />
                            </div>

                            <div class="lg:col-span-8 space-y-24">
                                {report.sections.map((section) => (
                                    <div class="space-y-8">
                                        <h4 class="text-sm font-mono font-black uppercase tracking-widest border-l-4 border-black pl-4">
                                            {section.subtitle}
                                        </h4>
                                        <p class="text-2xl md:text-3xl font-serif leading-[1.5] text-black/80 first-letter:text-6xl first-letter:font-black first-letter:mr-3 first-letter:float-left first-letter:leading-none">
                                            {section.content}
                                        </p>
                                    </div>
                                ))}
                            </div>

                            {idx < internalReports.length - 1 && (
                                <div class="absolute -bottom-32 left-0 w-full flex items-center gap-4 opacity-10">
                                    <div class="h-[1px] flex-grow bg-black" />
                                    <div class="w-2 h-2 bg-black rotate-45" />
                                    <div class="h-[1px] flex-grow bg-black" />
                                </div>
                            )}
                        </article>
                    ))
                }
            </div>

            <div
                class="mt-80 pt-40 border-t-8 border-black flex flex-col items-center gap-20 text-center"
            >
                <div class="space-y-6">
                    <p
                        class="text-5xl sm:text-7xl md:text-[8vw] font-black italic tracking-tighter uppercase leading-none"
                    >
                        El Eco de su Paso
                    </p>
                    <p class="text-xs font-mono font-bold tracking-[1em] text-black/30 uppercase">
                        La memoria del archivo es ahora su memoria
                    </p>
                </div>

                <div
                    class="max-w-2xl bg-white p-12 border-2 border-black shadow-[20px_20px_0px_rgba(0,0,0,0.05)] space-y-10"
                >
                    <p class="text-xl font-serif leading-relaxed italic text-black/60">
                        "Usted ya no es un visitante; ahora es parte del código que sostiene este
                        experimento. Su rastro es la tinta invisible que dibuja nuestra historia
                        colectiva."
                    </p>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                        <a
                            href="/conceptos/"
                            class="group relative inline-block px-16 py-6 bg-black text-white text-xs font-bold tracking-[0.4em] uppercase transition-all hover:-translate-y-1 active:translate-y-1"
                        >
                            Salir del Archivo
                            <div
                                class="absolute inset-0 border-2 border-black translate-x-3 translate-y-3 -z-10 group-hover:translate-x-0 group-hover:translate-y-0 transition-transform bg-white/50"
                            >
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <footer
            class="w-full bg-[#050505] text-white/40 py-8 px-8 border-t border-white/5 relative overflow-hidden"
        >
            <div
                class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6 font-mono text-[9px] font-bold uppercase tracking-[0.4em]"
            >
                <div class="flex items-center gap-6">
                    <div
                        id="footer-user-color"
                        class="w-3 h-3 bg-white transition-colors duration-1000"
                    >
                    </div>
                    <span id="footer-user-id" class="text-white">SR-XXXX</span>
                    <span class="opacity-30 self-center">|</span>
                    <span class="italic">Registro de Permanencia Automático</span>
                </div>

                <div class="flex gap-8 opacity-60">
                    <span id="screen-res">0X0</span>
                    <span id="nav-lang">ES</span>
                    <span id="current-time">00:00:00</span>
                </div>

                <div class="flex items-center gap-4 text-white/20">
                    <span>Involuntaria</span>
                    <div class="w-1 h-1 bg-white/10 rounded-full"></div>
                    <span>Inevitable</span>
                    <div class="w-1 h-1 bg-white/10 rounded-full"></div>
                    <span>Infinita</span>
                </div>
            </div>
        </footer>
    </main>
</Layout>

<script>
    const APPS_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbzKush6FWrPSw4U5QGWsdbUAePGSDuMgmG-TCoZsA0nLTYkBAFaRksZ8MuPGoOCAUG29Q/exec";

    async function initBureaucraticExperience() {
        const archive = document.getElementById("data-archive");
        const inspector = document.getElementById("inspector-card");
        const totalEl = document.getElementById("total-census");
        const userAura = document.getElementById("user-aura");
        const userHex = document.getElementById("user-hex");
        const userId = document.getElementById("user-id");
        const userOs = document.getElementById("user-os");
        const footerColor = document.getElementById("footer-user-color");
        const footerId = document.getElementById("footer-user-id");
        const resEl = document.getElementById("screen-res");
        const langEl = document.getElementById("nav-lang");
        const timeEl = document.getElementById("current-time");

        if (resEl) resEl.textContent = `${window.screen.width}X${window.screen.height}`;
        if (langEl) langEl.textContent = `${navigator.language.toUpperCase()}`;
        setInterval(() => {
            if (timeEl)
                timeEl.textContent = `${new Date().toISOString().split("T")[1].split(".")[0]}`;
        }, 1000);

        const localDataString = localStorage.getItem("jjlmoya_footprint_v5");
        const localData = localDataString ? JSON.parse(localDataString) : {};
        const myColor = localData.color || "#cccccc";
        const myId = localData.id || "SR-0000";

        if (userAura) userAura.style.backgroundColor = myColor;
        if (userHex) userHex.textContent = myColor.toUpperCase();
        if (userId) userId.textContent = myId;
        if (footerColor) footerColor.style.backgroundColor = myColor;
        if (footerId) footerId.textContent = myId;

        const platformMatch = navigator.userAgent.match(/\(([^)]+)\)/);
        if (userOs)
            userOs.textContent = platformMatch
                ? platformMatch[1].split(";")[0].toUpperCase().trim()
                : "ANDROID_SR";

        try {
            const response = await fetch(APPS_SCRIPT_URL);
            const footprints = await response.json();
            if (totalEl) totalEl.textContent = footprints.length.toString().padStart(4, "0");

            if (archive) {
                const loader = document.getElementById("archive-loader");
                if (loader) loader.remove();

                footprints.forEach((f: any) => {
                    const block = document.createElement("div");
                    block.className =
                        "w-full aspect-square cursor-crosshair hover:scale-150 hover:z-50 transition-transform active:scale-95 duration-200 border border-black/5 hover:border-black/40";
                    block.style.backgroundColor = f[1];
                    block.onclick = (e) => {
                        e.stopPropagation();
                        showInspector(f);
                    };
                    archive.appendChild(block);
                });
            }
        } catch (err) {
            if (totalEl) totalEl.textContent = "0001";
        }

        function showInspector(data: any) {
            if (!inspector) return;
            inspector.classList.remove("hidden");
            document.body.style.overflow = "hidden";
            document.getElementById("insp-color")!.style.backgroundColor = data[1];
            document.getElementById("insp-id")!.textContent = data[4] || "SR-DE-DATA";
            document.getElementById("insp-os")!.textContent =
                data[2].split(")")[0].split("(").pop() || "LINUX_SERVER";
            document.getElementById("insp-path")!.textContent = data[5] || "/ROOT";
            document.getElementById("insp-time")!.textContent = new Date(data[0]).toLocaleString(
                "es-ES"
            );
        }

        function closeInspector() {
            if (!inspector) return;
            inspector.classList.add("hidden");
            document.body.style.overflow = "";
        }

        document.getElementById("close-inspector")?.addEventListener("click", closeInspector);

        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeInspector();
        });

        document.addEventListener("click", (e) => {
            if (inspector && !inspector.classList.contains("hidden")) {
                const target = e.target as HTMLElement;
                if (target === inspector) {
                    closeInspector();
                }
            }
        });
    }

    initBureaucraticExperience();
</script>

<style>
    .border-text-black {
        -webkit-text-stroke: 1px black;
    }
</style>

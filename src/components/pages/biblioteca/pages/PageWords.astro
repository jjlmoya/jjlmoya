---
interface Props {
    side: 'left' | 'right';
}
const { side } = Astro.props;
---

{side === 'left' ? (
    <div class="flex items-center justify-center h-full w-full relative">
        <!-- Scroll Visual -->
        <div class="w-48 h-64 bg-[#d6cbb6] text-black/60 p-4 rounded shadow-lg rotate-2 overflow-hidden relative font-serif text-[8px] leading-tight select-none opacity-80">
            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#d6cbb6] z-10"></div>
            <p class="blur-[1px]">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum...
                (Repetir infinitamente)
            </p>
        </div>
    </div>
) : (
    <div class="flex flex-col items-center justify-center h-full text-center space-y-6 max-w-md mx-auto">
        <h3 class="font-serif text-3xl text-yellow-600/60 uppercase tracking-widest">La Voz</h3>
        
        <div class="space-y-2">
            <div class="font-variant-numeric tabular-nums text-4xl md:text-5xl font-bold text-[#e7e5e4]" id="words-count">
                0
            </div>
            <div class="text-sm text-[#e7e5e4]/40 uppercase tracking-wider">Palabras Pronunciadas</div>
        </div>
        
        <p class="font-serif text-xl leading-relaxed text-[#e7e5e4]">
            TANTO RUIDO. TANTAS PALABRAS PARA DECIR TAN POCO. AUNQUE ALGUNAS, SUPONGO, MERECIERON LA PENA.
        </p>
    </div>
)}

<script>
    import { calculateWordsStats } from "../../../../utils/libraryLogic";

    const countEl = document.getElementById('words-count');

    document.addEventListener('update-life-stats', (e: any) => {
        const { stats } = e.detail;
        if (!countEl || !stats) return;

        const { wordsSpoken } = calculateWordsStats(stats.daysAlive);
        countEl.innerText = wordsSpoken.toLocaleString();
    });
</script>

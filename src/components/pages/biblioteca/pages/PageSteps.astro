---
interface Props {
    side: 'left' | 'right';
}
const { side } = Astro.props;
---

{side === 'left' ? (
    <div class="flex items-center justify-center h-full w-full overflow-hidden relative">
        <!-- Winding Path Visual -->
        <svg viewBox="0 0 200 200" class="w-full h-full opacity-20 text-[#e7e5e4]">
            <path d="M10,190 C50,190 50,150 90,150 C130,150 130,110 170,110 C210,110 210,70 170,70 C130,70 130,30 90,30" 
                  fill="none" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4" />
            
            <!-- Footprints along the path (Static for now) -->
            <circle cx="20" cy="190" r="2" fill="currentColor" />
            <circle cx="50" cy="180" r="2" fill="currentColor" />
            <circle cx="80" cy="160" r="2" fill="currentColor" />
        </svg>
        
        <div class="absolute inset-0 flex items-center justify-center">
             <span class="text-6xl opacity-40">üë£</span>
        </div>
    </div>
) : (
    <div class="flex flex-col items-center justify-center h-full text-center space-y-6 max-w-md mx-auto">
        <h3 class="font-serif text-3xl text-orange-400/60 uppercase tracking-widest">El Camino</h3>
        
        <div class="space-y-2">
            <div class="font-variant-numeric tabular-nums text-4xl md:text-5xl font-bold text-[#e7e5e4]" id="steps-count">
                0
            </div>
            <div class="text-sm text-[#e7e5e4]/40 uppercase tracking-wider">Pasos Dados</div>
        </div>
        
        <p class="font-serif text-xl leading-relaxed text-[#e7e5e4]">
            "SIEMPRE MOVI√âNDOS. <span id="steps-km" class="text-orange-400">0 KM</span> RECORRIDOS. <span id="steps-world" class="text-orange-400">0 VUELTAS</span> AL MUNDO. Y SIN EMBARGO, AL FINAL, TODOS LLEG√ÅIS AL MISMO DESTINO."
        </p>
    </div>
)}

<script>
    import { calculateStepsStats } from "../../../../utils/libraryLogic";

    const countEl = document.getElementById('steps-count');
    const kmEl = document.getElementById('steps-km');
    const worldEl = document.getElementById('steps-world');

    document.addEventListener('update-life-stats', (e: any) => {
        const { stats } = e.detail;
        if (!countEl || !stats) return;

        const { stepsTaken } = calculateStepsStats(stats.daysAlive);
        // Avg step length ~0.762m
        const km = (stepsTaken * 0.762) / 1000;
        const worldCircumference = 40075;
        const worldTrips = (km / worldCircumference).toFixed(1);

        countEl.innerText = stepsTaken.toLocaleString();
        if (kmEl) kmEl.innerText = `${Math.floor(km).toLocaleString()} KM`;
        if (worldEl) worldEl.innerText = `${worldTrips} VECES`;
    });
</script>

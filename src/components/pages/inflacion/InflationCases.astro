---
import { Icon } from "astro-icon/components";

const cases = [
    {
        title: "Cine de Estreno",
        year: 1970,
        icon: "mdi:movie-open-star",
        color: "bg-indigo-100 text-indigo-800 border-indigo-200",
        price: "25 pesetas (0,15€)",
        description: `En 1970 ibas al cine por lo que hoy te cuesta... <strong>absolutamente nada</strong>. Con 0,15€ hoy en día te dan para una bolsa de plástico en el supermercado`,
    },
    {
        title: "Piso en Propiedad",
        year: 1985,
        icon: "mdi:home-city",
        color: "bg-emerald-100 text-emerald-800 border-emerald-200",
        price: "4.000.000 ptas (24.000€)",
        description: `Te comprabas una casa entera por lo que hoy cuesta un <strong>coche utilitario básico</strong>. Si vas con 24.000€ a una inmobiliaria hoy, lo único que te alquilan es un trastero`,
    },
    {
        title: "Litro de Gasolina",
        year: 1998,
        icon: "mdi:gas-station",
        color: "bg-rose-100 text-rose-800 border-rose-200",
        price: "100 pesetas (0,60€)",
        description: `Echabas un litro de combustible con lo que hoy no te llega ni para <strong>medio café</strong>. Con 60 céntimos hoy, la manguera de la gasolinera ni se desbloquea`,
    },
    {
        title: "Carro del Súper",
        year: 2002,
        icon: "mdi:cart-outline",
        color: "bg-amber-100 text-amber-800 border-amber-200",
        price: "50€ (Carro Lleno)",
        description: `Con 50€ llenabas el carro hasta arriba para toda la semana. Hoy, con ese mismo billete, sales con <strong>dos bolsas medio vacías</strong> y cara de no saber dónde se ha ido el dinero`,
    },
    {
        title: "Caña de Cerveza",
        year: 1985,
        icon: "mdi:glass-mug-variant",
        color: "bg-yellow-100 text-yellow-800 border-yellow-200",
        price: "25 pesetas (0,15€)",
        description: `Con lo que hoy te cuesta una caña mal tirada en una terraza, en el 85 invitabas a <strong>toda la cuadrilla</strong> y te sobraba para el taxi de vuelta a casa`,
    },
    {
        title: "Menú del Día",
        year: 1995,
        icon: "mdi:silverware-fork-knife",
        color: "bg-orange-100 text-orange-800 border-orange-200",
        price: "800 pesetas (4,80€)",
        description: `Primer plato, segundo, postre, pan, vino y café. Hoy por 4,80€ te dan los buenos días y <strong>un vaso de agua del grifo</strong> si el camarero está de buenas`,
    },
    {
        title: "Entrada Concierto",
        year: 1990,
        icon: "mdi:microphone-variant",
        color: "bg-purple-100 text-purple-800 border-purple-200",
        price: "1.500 pesetas (9€)",
        description: `Ver a los grandes del rock costaba menos que dos copas. Hoy, para ver a un artista medio decente desde la última fila, tienes que pedir un <strong>crédito rápido</strong>`,
    },
    {
        title: "Barra de Pan",
        year: 1980,
        icon: "mdi:baguette",
        color: "bg-stone-100 text-stone-800 border-stone-200",
        price: "12 pesetas (0,07€)",
        description: `Ibas a por el pan con una moneda que hoy tirarías a la basura. Hoy el pan "artesano" (congelado) cuesta <strong>20 veces más</strong> y dura 20 veces menos tierno`,
    },
    {
        title: "Billete de Metro",
        year: 1998,
        icon: "mdi:train",
        color: "bg-blue-100 text-blue-800 border-blue-200",
        price: "130 pesetas (0,78€)",
        description: `Cruzabas Madrid entero por céntimos. Hoy el transporte público tiene precio de <strong>viaje interplanetario</strong>, y encima vas igual de apretado que entonces`,
    },
    {
        title: "Alquiler Centro",
        year: 1999,
        icon: "mdi:key-variant",
        color: "bg-teal-100 text-teal-800 border-teal-200",
        price: "40.000 ptas (240€)",
        description: `Vivías en el centro por lo que hoy te cuesta la comunidad de vecinos. Ahora por 240€ no alquilas ni una <strong>plaza de garaje</strong> en la periferia`,
    },
    {
        title: "Matrícula Uni",
        year: 1995,
        icon: "mdi:school",
        color: "bg-cyan-100 text-cyan-800 border-cyan-200",
        price: "60.000 ptas (360€)",
        description: `Un año entero de carrera costaba lo que hoy te gastas solo en los libros. Ahora estudiar es un <strong>lujo asiático</strong>, y encima sales directo a la cola del paro`,
    },
    {
        title: "Kilo de Patatas",
        year: 1982,
        icon: "mdi:basket",
        color: "bg-lime-100 text-lime-800 border-lime-200",
        price: "15 pesetas (0,09€)",
        description: `La base de la alimentación costaba céntimos. Hoy hacer una tortilla de patatas es un acto de <strong>ostentación económica</strong> digno de la realeza europea`,
    },
    {
        title: "Copa en Discoteca",
        year: 1992,
        icon: "mdi:glass-cocktail",
        color: "bg-fuchsia-100 text-fuchsia-800 border-fuchsia-200",
        price: "500 pesetas (3€)",
        description: `Salías de fiesta con 2.000 pesetas y eras el rey de la pista. Hoy con 3€ no te dejan ni <strong>oler los hielos</strong> en la barra de un bar de barrio`,
    },
    {
        title: "Periódico",
        year: 1988,
        icon: "mdi:newspaper",
        color: "bg-gray-100 text-gray-800 border-gray-200",
        price: "50 pesetas (0,30€)",
        description: `Informarse costaba una moneda. Hoy el papel es un artículo de <strong>lujo vintage</strong>, y las noticias... bueno, las noticias siguen siendo igual de deprimentes`,
    },
    {
        title: "Bolsa de Chuches",
        year: 1990,
        icon: "mdi:candy",
        color: "bg-pink-100 text-pink-800 border-pink-200",
        price: "5 pesetas (0,03€)",
        description: `Con un duro eras la persona más feliz del barrio. Hoy entras a una tienda de golosinas con 5 céntimos y llaman a seguridad por <strong>insulto a la autoridad</strong>`,
    },
    {
        title: "Café en Bar",
        year: 1985,
        icon: "mdi:coffee",
        color: "bg-amber-100 text-amber-800 border-amber-200",
        price: "40 pesetas (0,24€)",
        description: `Te tomabas un café caliente y bien servido. Hoy por 24 céntimos no te dan ni el <strong>azucarillo</strong> para el café que te haces tú mismo en casa`,
    },
    {
        title: "Videojuego Nuevo",
        year: 1998,
        icon: "mdi:controller-classic",
        color: "bg-violet-100 text-violet-800 border-violet-200",
        price: "8.990 ptas (54€)",
        description: `Un juegazo de PS1 costaba 50€. Hoy, la edición estándar digital te sale por 80€ y luego te piden otros 40€ por el <strong>pase de temporada</strong>`,
    },
    {
        title: "Paquete Tabaco",
        year: 1990,
        icon: "mdi:smoking",
        color: "bg-red-100 text-red-800 border-red-200",
        price: "125 pesetas (0,75€)",
        description: `Fumar era un vicio barato. Hoy, con lo que cuesta un paquete, podrías estar pagando la letra de un <strong>coche pequeño</strong> (de segunda mano, claro)`,
    },
    {
        title: "Helado Frigo",
        year: 1995,
        icon: "mdi:ice-cream",
        color: "bg-sky-100 text-sky-800 border-sky-200",
        price: "75 pesetas (0,45€)",
        description: `Te comías un Calippo por menos de medio euro. Hoy vas al chiringuito y por un helado te piden la <strong>hipoteca de la casa</strong>`,
    },
    {
        title: "Revista Hobby",
        year: 1997,
        icon: "mdi:book-open-page-variant",
        color: "bg-green-100 text-green-800 border-green-200",
        price: "395 pesetas (2,37€)",
        description: `Te enterabas de todos los trucos y noticias por dos euros. Hoy, por ese precio, no te dejan ni <strong>leer los titulares</strong> en las webs de suscripción`,
    },
    {
        title: "Hora de Ciber",
        year: 2000,
        icon: "mdi:desktop-classic",
        color: "bg-slate-100 text-slate-800 border-slate-200",
        price: "200 pesetas (1,20€)",
        description: `Te conectabas al Messenger y jugabas al Counter por un euro. Hoy, el café del Starbucks donde te conectas al WiFi te cuesta el <strong>triple</strong>`,
    },
    {
        title: "Chicle Boomer",
        year: 1995,
        icon: "mdi:emoticon-tongue",
        color: "bg-rose-50 text-rose-800 border-rose-200",
        price: "5 pesetas (0,03€)",
        description: `El chicle kilométrico costaba un duro. Hoy, por 5 céntimos, no te dan ni el <strong>papel del envoltorio</strong> para tirarlo a la basura`,
    },
    {
        title: "Entrada Fútbol",
        year: 1988,
        icon: "mdi:soccer",
        color: "bg-lime-50 text-lime-800 border-lime-200",
        price: "1.000 ptas (6€)",
        description: `Ibas al estadio a ver a tu equipo por 6 euros. Hoy, la entrada más barata cuesta más que la <strong>camiseta oficial</strong> (que también es carísima)`,
    },
    {
        title: "Botellín Agua",
        year: 1992,
        icon: "mdi:water",
        color: "bg-cyan-50 text-cyan-800 border-cyan-200",
        price: "50 pesetas (0,30€)",
        description: `El agua costaba lo que vale: poco. Hoy en un aeropuerto te cobran el agua a precio de <strong>sangre de unicornio</strong>`,
    },
    {
        title: "Llamada Cabina",
        year: 1990,
        icon: "mdi:phone-classic",
        color: "bg-teal-50 text-teal-800 border-teal-200",
        price: "15 pesetas (0,09€)",
        description: `Llamabas a casa para que te recogieran por 15 pesetas. Hoy, el establecimiento de llamada te cuesta más que <strong>toda la conversación</strong> de entonces`,
    },
    {
        title: "Coche Utilitario",
        year: 1985,
        icon: "mdi:car-hatchback",
        color: "bg-zinc-100 text-zinc-800 border-zinc-200",
        price: "750.000 ptas (4.500€)",
        description: `Estrenabas coche por menos de 5.000€. Hoy, por ese precio, te compras un <strong>patinete eléctrico</strong> de gama media-alta`,
    },
    {
        title: "Sello Correos",
        year: 1980,
        icon: "mdi:email",
        color: "bg-yellow-50 text-yellow-800 border-yellow-200",
        price: "12 pesetas (0,07€)",
        description: `Enviar una carta costaba céntimos. Hoy enviar un burofax te cuesta lo mismo que invitar a cenar al <strong>cartero</strong>`,
    },
    {
        title: "Cinta Cassette",
        year: 1988,
        icon: "mdi:cassette",
        color: "bg-orange-50 text-orange-800 border-orange-200",
        price: "800 pesetas (4,80€)",
        description: `Te comprabas el último disco de Mecano por menos de 5€. Hoy el vinilo "edición coleccionista" te cuesta medio <strong>riñón</strong>`,
    },
    {
        title: "Pila Alcalina",
        year: 1995,
        icon: "mdi:battery",
        color: "bg-emerald-50 text-emerald-800 border-emerald-200",
        price: "100 pesetas (0,60€)",
        description: `Alimentabas tu Game Boy por 60 céntimos. Hoy un paquete de pilas cuesta más que la propia <strong>consola</strong> (de segunda mano)`,
    },
    {
        title: "SMS",
        year: 2000,
        icon: "mdi:message-text",
        color: "bg-blue-50 text-blue-800 border-blue-200",
        price: "25 pesetas (0,15€)",
        description: `Mandabas un "tk" para ahorrar caracteres. Hoy tienes WhatsApp gratis, pero pagas con tu <strong>alma y tus datos</strong>`,
    },
];
---

<div class="w-full max-w-4xl mx-auto mt-12 mb-12">
    <h2
        class="text-2xl md:text-3xl font-black text-center mb-2 text-slate-800 uppercase tracking-tight transform -rotate-1"
    >
        Desde la barra del bar te digo...
    </h2>
    <p class="text-center text-slate-500 font-mono text-sm mb-8 italic transform -rotate-1">
        (el cuñado que a veces tiene razón)
    </p>
    <div
        id="cases-container"
        class="flex overflow-x-auto snap-x snap-mandatory gap-4 pt-8 pb-6 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide cursor-grab active:cursor-grabbing"
    >
        {
            cases.map((item) => (
                <div
                    class={`flex-none w-[85vw] sm:w-96 snap-center relative p-6 rounded-2xl border-2 ${item.color} shadow-sm hover:shadow-md transition-shadow select-none group`}
                >
                    <div class="absolute -top-4 -right-4 w-12 h-12 bg-white rounded-full border-2 border-current flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform">
                        <Icon name={item.icon} class="w-6 h-6" />
                    </div>

                    <div class="flex justify-between items-start mb-3 pr-8">
                        <div class="text-xs font-black uppercase tracking-widest opacity-60 mt-1">
                            {item.year}
                        </div>
                        <div class="font-mono text-sm font-bold bg-white/60 px-2 py-1 rounded border border-current/20">
                            {item.price}
                        </div>
                    </div>

                    <h3 class="text-xl font-black mb-3 leading-tight pr-6">{item.title}</h3>

                    <p
                        class="text-sm leading-relaxed opacity-90 mb-4"
                        set:html={item.description}
                    />

                    <div class="flex justify-end">
                        <button
                            class="flex items-center gap-2 text-xs font-bold uppercase tracking-wider opacity-60 hover:opacity-100 transition-opacity"
                            data-share-btn
                            data-share-text={`En ${item.year}, ${item.title} costaba ${item.price}. ${item.description.replace(/<[^>]*>?/gm, "")} #Inflacion`}
                        >
                            <Icon name="mdi:share-variant" class="w-4 h-4" />
                            Compartir
                        </button>
                    </div>
                </div>
            ))
        }
    </div>
</div>

<script>
    const slider = document.getElementById("cases-container");
    let isDown = false;
    let startX = 0;
    let scrollLeft = 0;

    if (slider) {
        slider.addEventListener("mousedown", (e) => {
            isDown = true;
            slider.classList.add("active");
            slider.classList.remove("snap-x", "snap-mandatory"); 
            startX = e.pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
        });

        slider.addEventListener("mouseleave", () => {
            isDown = false;
            slider.classList.remove("active");
            slider.classList.add("snap-x", "snap-mandatory"); 
        });

        slider.addEventListener("mouseup", () => {
            isDown = false;
            slider.classList.remove("active");
            slider.classList.add("snap-x", "snap-mandatory"); 
        });

        slider.addEventListener("mousemove", (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - slider.offsetLeft;
            const walk = (x - startX) * 2; 
            slider.scrollLeft = scrollLeft - walk;
        });
    }
</script>

<style>
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>

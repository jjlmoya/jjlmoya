---
import { Icon } from "astro-icon/components";
import Bibliography from "../Bibliography.astro";
---

<section class="prose prose-lg dark:prose-invert max-w-4xl mx-auto mt-16 px-4">
    <div class="mb-12 text-center">
        <h2 class="text-3xl font-extrabold text-slate-900 dark:text-white mb-6">
            Guía Definitiva de Optimización de Corte
        </h2>
        <p class="text-xl text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl mx-auto">
            Domina el arte de aprovechar tus materiales, reduce el impacto ambiental y ahorra dinero
            en cada proyecto con nuestra enciclopedia técnica sobre el corte de stock.
        </p>
    </div>

    <div
        class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-8 rounded-2xl shadow-sm mb-12"
    >
        <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-3">
            <Icon name="mdi:text-box-search-outline" class="w-8 h-8 text-indigo-500" />
            ¿Qué es la Optimización de Corte?
        </h3>
        <div class="space-y-4 text-slate-700 dark:text-slate-300">
            <p>
                La optimización de corte, conocida técnicamente como el <strong
                    >Problema de Corte de Stock (Cutting Stock Problem)</strong
                >, es uno de los desafíos logísticos más fascinantes en la ingeniería industrial y
                la matemática aplicada. Se define como el proceso de planificar la división de
                unidades de material estándar (tableros, barras, bobinas) en piezas más pequeñas de
                tamaños específicos, buscando minimizar el material sobrante o "desperdicio".
            </p>
            <p>
                Aunque pueda parecer trivial para cortar una o dos tablas, la complejidad crece
                exponencialmente con cada pieza añadida. Para un proyecto con 20 piezas diferentes y
                5 barras de stock, existen literalmente millones de combinaciones posibles. Un
                humano experimentado puede encontrar una buena solución, pero un algoritmo
                computacional puede encontrar la <strong>solución óptima</strong> en milisegundos, reduciendo
                el desperdicio del 15 a 20% habitual a menos del 5%.
            </p>
        </div>
    </div>

    <div class="grid md:grid-cols-2 gap-8 mb-16">
        <div
            class="bg-orange-50 dark:bg-orange-900/10 p-8 rounded-2xl border border-orange-100 dark:border-orange-800/30"
        >
            <div class="flex items-center gap-4 mb-6">
                <div class="p-3 bg-white dark:bg-orange-900/30 rounded-xl shadow-sm">
                    <Icon
                        name="mdi:arrow-expand-horizontal"
                        class="w-8 h-8 text-orange-600 dark:text-orange-400"
                    />
                </div>
                <h3 class="text-xl font-bold text-slate-900 dark:text-white m-0">
                    Corte Lineal (1D)
                </h3>
            </div>
            <p class="text-slate-700 dark:text-slate-300 text-sm mb-4">
                En esta modalidad, la optimización ocurre en una sola dimensión: la <strong
                    >longitud</strong
                >. El ancho y el grosor del material se asumen constantes y no afectan al cálculo
                del layout, aunque sí son vitales para asegurar que el stock es adecuado para el
                trabajo.
            </p>
            <h4
                class="font-bold text-sm uppercase tracking-wide text-orange-800 dark:text-orange-300 mb-2"
            >
                Materiales Comunes
            </h4>
            <ul class="space-y-2">
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-orange-500" /> Madera dimensional
                    (listones, vigas)
                </li>
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-orange-500" /> Perfilería metálica
                    y de aluminio
                </li>
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-orange-500" /> Tuberías (PVC, Cobre,
                    Acero)
                </li>
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-orange-500" /> Varillas roscadas
                    y armaduras
                </li>
            </ul>
        </div>

        <div
            class="bg-blue-50 dark:bg-blue-900/10 p-8 rounded-2xl border border-blue-100 dark:border-blue-800/30"
        >
            <div class="flex items-center gap-4 mb-6">
                <div class="p-3 bg-white dark:bg-blue-900/30 rounded-xl shadow-sm">
                    <Icon name="mdi:view-grid" class="w-8 h-8 text-blue-600 dark:text-blue-400" />
                </div>
                <h3 class="text-xl font-bold text-slate-900 dark:text-white m-0">
                    Corte de Panel (2D)
                </h3>
            </div>
            <p class="text-slate-700 dark:text-slate-300 text-sm mb-4">
                Aquí la complejidad aumenta al gestionar dos dimensiones: <strong
                    >ancho y largo</strong
                >. Nuestra herramienta utiliza algoritmos de "tipo guillotina", lo que significa que
                asume que cada corte debe ir de un borde al otro del material. Esto es fundamental
                para cortes con sierras de mesa o circulares manuales.
            </p>
            <h4
                class="font-bold text-sm uppercase tracking-wide text-blue-800 dark:text-blue-300 mb-2"
            >
                Materiales Comunes
            </h4>
            <ul class="space-y-2">
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-blue-500" /> Tableros derivados
                    (MDF, Aglomerado)
                </li>
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-blue-500" /> Contrachapado (Plywood)
                </li>
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-blue-500" /> Vidrio y Metacrilato
                </li>
                <li class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
                    <Icon name="mdi:check-circle" class="w-4 h-4 text-blue-500" /> Chapas metálicas
                </li>
            </ul>
        </div>
    </div>

    <div class="mb-16">
        <h3
            class="text-2xl font-bold text-slate-900 dark:text-white mb-6 pb-2 border-b border-gray-200 dark:border-gray-800"
        >
            El Factor Crítico: Entendiendo el "Kerf"
        </h3>

        <div class="flex flex-col md:flex-row gap-8 items-start">
            <div class="flex-1 text-slate-700 dark:text-slate-300 space-y-4">
                <p>
                    El <strong>Kerf</strong> es el término técnico para describir el ancho del material
                    que se elimina durante el proceso de corte. A diferencia de un corte ideal matemático
                    (que tiene grosor cero), en el mundo físico, ninguna herramienta separa material
                    sin consumir una parte de él.
                </p>
                <div
                    class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg border-l-4 border-slate-500 italic text-sm"
                >
                    <strong>La falacia del principiante:</strong> "Si tengo una tabla de 100cm y corto
                    dos piezas de 50cm, encajan perfectamente". <br />
                    <strong>La realidad:</strong> Obtendrás una pieza de 50cm y otra de 49.7cm (suponiendo
                    un disco estándar de 3mm).
                </div>
                <h4 class="font-bold text-slate-900 dark:text-white mt-4">
                    Medidas de Kerf Comunes:
                </h4>
                <ul class="list-disc pl-5 space-y-1 text-sm">
                    <li><strong>Sierra de cinta fina:</strong> 0.5mm - 1.0mm</li>
                    <li><strong>Sierra circular de mano:</strong> 1.5mm - 2.5mm</li>
                    <li><strong>Sierra de mesa estándar:</strong> 3.0mm - 3.2mm (1/8")</li>
                    <li><strong>Corte por láser (metacrilato/madera):</strong> 0.1mm - 0.3mm</li>
                    <li><strong>Corte por plasma (metal):</strong> 2.0mm - 4.0mm</li>
                </ul>
            </div>
            <div
                class="md:w-1/3 bg-slate-50 dark:bg-slate-800 p-6 rounded-xl flex flex-col items-center justify-center text-center"
            >
                <Icon
                    name="mdi:saw-blade"
                    class="w-24 h-24 text-slate-300 dark:text-slate-600 mb-4"
                />
                <p class="text-xs text-slate-500 dark:text-slate-400">
                    El diente de la sierra determina el kerf. Muchos discos tienen dientes alternos
                    (ATB) que hacen el corte ligeramente más ancho que el propio cuerpo del disco
                    para evitar fricción.
                </p>
            </div>
        </div>
    </div>

    <div class="mb-16">
        <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-6">
            Bajo el Capó: El Algoritmo
        </h3>
        <p class="text-slate-700 dark:text-slate-300 mb-4">
            Resolver este problema de forma exacta es un problema <strong>NP-Hard</strong>. Eso
            significa que el tiempo necesario para calcular la solución perfecta crece tan rápido
            que para listas de cortes grandes, el universo se enfriaría antes de que un ordenador
            terminara de calcular todas las combinaciones.
        </p>
        <p class="text-slate-700 dark:text-slate-300 mb-6">
            Por eso, utilizamos heurísticas inteligentes. El núcleo de nuestro optimizador 1D
            utiliza una estrategia <strong>Best Fit Decreasing (BFD)</strong>:
        </p>
        <ol class="list-decimal pl-5 space-y-4 text-slate-700 dark:text-slate-300">
            <li>
                <strong>Ordenamiento:</strong> Primero, ordenamos todas tus piezas deseadas de mayor
                a menor longitud. Las piezas grandes son las más difíciles de encajar ("rocas"), mientras
                que las pequeñas ("arena") caben en cualquier hueco.
            </li>
            <li>
                <strong>Evaluación:</strong> Tomamos la pieza más grande y buscamos en todos los restos
                de material (retales) ya generados. Buscamos el retal donde la pieza quepa dejando el
                <em>menor sobrante posible</em>.
            </li>
            <li>
                <strong>Nuevo Stock:</strong> Si la pieza no cabe en ningún retal existente, abrimos
                una nueva barra de stock virgen y la colocamos allí.
            </li>
            <li>
                <strong>Iteración:</strong> Repetimos el proceso hasta colocar todas las piezas.
            </li>
        </ol>
    </div>

    <div
        class="bg-gradient-to-r from-gray-900 to-slate-800 text-white p-8 rounded-2xl shadow-xl mb-16"
    >
        <h3 class="text-2xl font-bold mb-8 text-center flex items-center justify-center gap-3">
            <Icon name="mdi:account-hard-hat" class="w-8 h-8 text-yellow-500" />
            Maestría en el Taller
        </h3>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="space-y-3">
                <h4 class="font-bold text-lg text-yellow-400 flex items-center gap-2">
                    <Icon name="mdi:pencil-outline" class="w-5 h-5" />
                    Marcado Preciso
                </h4>
                <p class="text-sm text-gray-300 leading-relaxed">
                    Usa un cuchillo de marcar o un portaminas de 0.5mm. La tiza o los lápices de
                    carpintero desafilados pueden añadir 1-2mm de error por línea. Marca siempre con
                    una "V" apuntando al punto exacto.
                </p>
            </div>
            <div class="space-y-3">
                <h4 class="font-bold text-lg text-yellow-400 flex items-center gap-2">
                    <Icon name="mdi:ruler" class="w-5 h-5" />
                    Mide Dos veces
                </h4>
                <p class="text-sm text-gray-300 leading-relaxed">
                    El viejo adagio "Mide dos veces, corta una" es ley. Además, no asumas que el
                    extremo de tu stock está cuadrado (a 90°). Haz un "corte de saneado" de 5mm al
                    principio de cada barra nueva.
                </p>
            </div>
            <div class="space-y-3">
                <h4 class="font-bold text-lg text-yellow-400 flex items-center gap-2">
                    <Icon name="mdi:grain" class="w-5 h-5" />
                    Veta de la Madera
                </h4>
                <p class="text-sm text-gray-300 leading-relaxed">
                    En cortes 2D para madera real, la dirección de la veta importa. Nuestra
                    herramienta (actualmente) optimiza por área. Si necesitas continuidad de veta
                    para frentes de cajones, deberás agrupar esas piezas manualmente.
                </p>
            </div>
        </div>
    </div>

    <Bibliography
        links={[
            {
                name: "Cutting Stock Problem - Wikipedia",
                url: "https://en.wikipedia.org/wiki/Cutting_stock_problem",
            },
            {
                name: "Bin Packing Problem - Wolfram MathWorld",
                url: "https://mathworld.wolfram.com/BinPackingProblem.html",
            },
        ]}
    />
</section>

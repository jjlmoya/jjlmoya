---
import { Icon } from "astro-icon/components";
---

<div class="w-full max-w-4xl mx-auto" id="cookware-selector">
    <div
        class="cookware-main-card bg-white dark:bg-slate-900 rounded-[2rem] shadow-2xl overflow-hidden border border-slate-100 dark:border-slate-800 transition-all duration-500"
    >
        <style is:global>
            
            body.is-widget #cookware-selector .cookware-main-card {
                border-radius: 0 !important;
                border: none !important;
                box-shadow: none !important;
                background: transparent !important;
            }

            body.is-widget #cookware-selector .p-6,
            body.is-widget #cookware-selector .md\:p-10,
            body.is-widget #cookware-selector .lg\:p-12 {
                padding: 1.25rem !important;
            }

            body.is-widget #cookware-selector .grid {
                gap: 1.5rem !important;
            }

            body.is-widget .style-btn,
            body.is-widget .maint-btn {
                padding: 1rem !important;
            }
        </style>

        <div class="h-1.5 w-full bg-slate-100 dark:bg-slate-800 relative">
            <div
                id="progress-bar"
                class="absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-purple-600 transition-all duration-500 ease-out"
                style="width: 0%"
            >
            </div>
        </div>

        <div class="p-6 md:p-10 lg:p-12">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
                <div class="lg:col-span-7 space-y-8">
                    <div class="space-y-4">
                        <label
                            class="flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500"
                        >
                            <span
                                class="w-5 h-5 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 flex items-center justify-center text-[10px]"
                                >1</span
                            >
                            ¿Cómo cocinas habitualmente?
                        </label>

                        <div class="grid grid-cols-2 gap-3">
                            <button
                                class="style-btn group p-4 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 text-left transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="sear"
                            >
                                <Icon name="mdi:fire" class="w-6 h-6 mb-2 text-orange-500" />
                                <span
                                    class="block text-xs font-black text-slate-900 dark:text-white"
                                    >Fuego Alto</span
                                >
                                <span class="text-[9px] text-slate-400 font-bold uppercase"
                                    >Dorar / Sellar</span
                                >
                            </button>
                            <button
                                class="style-btn group p-4 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 text-left transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="delicate"
                            >
                                <Icon name="mdi:egg-fried" class="w-6 h-6 mb-2 text-yellow-500" />
                                <span
                                    class="block text-xs font-black text-slate-900 dark:text-white"
                                    >Delicado</span
                                >
                                <span class="text-[9px] text-slate-400 font-bold uppercase"
                                    >Huevos / Tortillas</span
                                >
                            </button>
                            <button
                                class="style-btn group p-4 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 text-left transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="stew"
                            >
                                <Icon name="mdi:pot-mix" class="w-6 h-6 mb-2 text-red-500" />
                                <span
                                    class="block text-xs font-black text-slate-900 dark:text-white"
                                    >Guisos</span
                                >
                                <span class="text-[9px] text-slate-400 font-bold uppercase"
                                    >Cocción Lenta</span
                                >
                            </button>
                            <button
                                class="style-btn group p-4 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 text-left transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="fast"
                            >
                                <Icon name="mdi:flash" class="w-6 h-6 mb-2 text-blue-500" />
                                <span
                                    class="block text-xs font-black text-slate-900 dark:text-white"
                                    >Rápido</span
                                >
                                <span class="text-[9px] text-slate-400 font-bold uppercase"
                                    >Salteados / Wok</span
                                >
                            </button>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <label
                            class="flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 dark:text-slate-500"
                        >
                            <span
                                class="w-5 h-5 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 flex items-center justify-center text-[10px]"
                                >2</span
                            >
                            Nivel de Mantenimiento
                        </label>

                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                            <button
                                class="maint-btn group flex flex-col items-center text-center gap-3 p-5 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="lazy"
                            >
                                <div
                                    class="w-12 h-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:text-green-500 transition-colors"
                                >
                                    <Icon name="mdi:dishwasher" class="w-6 h-6" />
                                </div>
                                <div>
                                    <span
                                        class="block text-xs font-black text-slate-900 dark:text-white tracking-tight"
                                        >Bajo / Nulo</span
                                    >
                                    <span
                                        class="text-[9px] text-slate-400 font-medium leading-tight line-clamp-2"
                                        >Sin complicaciones lavado.</span
                                    >
                                </div>
                            </button>
                            <button
                                class="maint-btn group flex flex-col items-center text-center gap-3 p-5 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="care"
                            >
                                <div
                                    class="w-12 h-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:text-blue-500 transition-colors"
                                >
                                    <Icon name="mdi:hand-water" class="w-6 h-6" />
                                </div>
                                <div>
                                    <span
                                        class="block text-xs font-black text-slate-900 dark:text-white tracking-tight"
                                        >Medio</span
                                    >
                                    <span
                                        class="text-[9px] text-slate-400 font-medium leading-tight line-clamp-2"
                                        >Lavado a mano normal.</span
                                    >
                                </div>
                            </button>
                            <button
                                class="maint-btn group flex flex-col items-center text-center gap-3 p-5 rounded-2xl border-2 border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 transition-all hover:shadow-lg hover:border-indigo-200"
                                data-value="ritual"
                            >
                                <div
                                    class="w-12 h-12 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-400 group-hover:text-amber-500 transition-colors"
                                >
                                    <Icon name="mdi:diamond-stone" class="w-6 h-6" />
                                </div>
                                <div>
                                    <span
                                        class="block text-xs font-black text-slate-900 dark:text-white tracking-tight"
                                        >Ritual (Alto)</span
                                    >
                                    <span
                                        class="text-[9px] text-slate-400 font-medium leading-tight line-clamp-2"
                                        >Disfruto del curado.</span
                                    >
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-5 flex flex-col gap-6">
                    <div
                        id="final-card"
                        class="bg-slate-900 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden group min-h-[320px] flex flex-col justify-center"
                    >
                        <div
                            id="card-grad"
                            class="absolute inset-0 bg-gradient-to-br from-slate-800 to-slate-950 transition-all duration-1000"
                        >
                        </div>
                        <div
                            class="absolute -right-12 -top-12 w-48 h-48 bg-white/10 rounded-full blur-3xl group-hover:scale-125 transition-transform duration-700"
                        >
                        </div>

                        <div class="relative z-10 space-y-6 text-center">
                            <div class="flex flex-col items-center">
                                <div id="res-icon-container" class="mb-4">
                                    <div id="icon-placeholder">
                                        <Icon name="mdi:chef-hat" class="w-24 h-24 text-white/20" />
                                    </div>
                                    <div id="icon-stainless" class="result-icon hidden">
                                        <Icon
                                            name="mdi:shield-star-outline"
                                            class="w-24 h-24 text-white"
                                        />
                                    </div>
                                    <div id="icon-nonstick" class="result-icon hidden">
                                        <Icon name="mdi:feather" class="w-24 h-24 text-white" />
                                    </div>
                                    <div id="icon-castiron" class="result-icon hidden">
                                        <Icon
                                            name="mdi:weight-kilogram"
                                            class="w-24 h-24 text-white"
                                        />
                                    </div>
                                    <div id="icon-carbon" class="result-icon hidden">
                                        <Icon name="mdi:chef-hat" class="w-24 h-24 text-white" />
                                    </div>
                                    <div id="icon-enameled" class="result-icon hidden">
                                        <Icon name="mdi:pot" class="w-24 h-24 text-white" />
                                    </div>
                                </div>
                                <span
                                    class="text-[9px] font-black uppercase tracking-widest text-white/40 mb-1"
                                    >Tu Sartén Ideal</span
                                >
                                <h3 class="text-3xl font-black tracking-tight" id="res-name">
                                    Selecciona opciones
                                </h3>
                                <p class="text-xs font-medium text-white/60 mt-1" id="res-tag">
                                    Para ver tu recomendación
                                </p>
                            </div>

                            <div
                                id="res-details"
                                class="hidden grid grid-cols-2 gap-3 pt-4 border-t border-white/10"
                            >
                                <div class="bg-white/5 rounded-xl p-3 border border-white/5">
                                    <span
                                        class="text-[8px] font-black uppercase text-green-400 block mb-1"
                                        >PRO</span
                                    >
                                    <p
                                        class="text-[10px] leading-tight text-white/90"
                                        id="res-pros"
                                    >
                                        -
                                    </p>
                                </div>
                                <div class="bg-white/5 rounded-xl p-3 border border-white/5">
                                    <span
                                        class="text-[8px] font-black uppercase text-red-400 block mb-1"
                                        >CONTRA</span
                                    >
                                    <p
                                        class="text-[10px] leading-tight text-white/90"
                                        id="res-cons"
                                    >
                                        -
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="bg-slate-50 dark:bg-slate-800/40 rounded-3xl p-6 border border-slate-100 dark:border-slate-800/50 flex flex-col h-full space-y-4"
                    >
                        <div class="flex items-center gap-2">
                            <div class="p-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg">
                                <Icon
                                    name="mdi:lightbulb-on-outline"
                                    class="w-4 h-4 text-indigo-600 dark:text-indigo-400"
                                />
                            </div>
                            <span
                                class="text-sm font-black text-slate-900 dark:text-white uppercase tracking-tighter"
                                >Consejo Maestro</span
                            >
                        </div>
                        <p
                            class="text-[11px] leading-relaxed text-slate-600 dark:text-slate-400 font-light italic bg-white dark:bg-slate-900/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-800"
                            id="res-tip"
                        >
                            "Combinar una opción de acero para dorar y una antiadherente para huevos
                            es la base de cualquier cocina eficiente."
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script is:inline>
    const STATE = { style: null, maint: null };

    const DB = {
        stainless: {
            name: "Acero Inoxidable",
            tag: "El Todoterreno Pro",
            grad: "from-slate-600 to-slate-900",
            icon: "mdi:shield-star-outline",
            pros: "Eterna y no reactiva. Dorado perfecto.",
            cons: "Requiere técnica (Tª) para no pegarse.",
            tip: "Usa el efecto Leidenfrost: cuando una gota de agua ruede como una perla, está lista.",
        },
        nonstick: {
            name: "Antiadherente",
            tag: "Máxima Comodidad",
            grad: "from-zinc-700 to-black",
            icon: "mdi:feather",
            pros: "Nada se pega. Fácil limpieza.",
            cons: "Dura poco (2-3 años). No fuego alto.",
            tip: "Lávala siempre a mano y usa utensilios de madera/silicona para duplicar su vida útil.",
        },
        castiron: {
            name: "Hierro Fundido",
            tag: "La Clásica de Siempre",
            grad: "from-orange-950 to-black",
            icon: "mdi:weight-kilogram",
            pros: "Retención de calor increíble. Eterna.",
            cons: "Muy pesada. Requiere curado habitual.",
            tip: "Se calienta lento, pero una vez caliente es un tanque. Ideal para chuletones.",
        },
        carbon: {
            name: "Acero al Carbono",
            tag: "Agilidad en el Fuego",
            grad: "from-blue-900 to-slate-900",
            icon: "mdi:chef-hat",
            pros: "Ligera como el acero, casi como hierro.",
            cons: "Se oxida si se deja húmeda. Estética sufrida.",
            tip: "Cuanto más negra y fea se pone, mejor funciona. Es el secreto de los mejores woks.",
        },
        enameled: {
            name: "Hierro Esmaltado",
            tag: "Calidad Gourmet",
            grad: "from-red-700 to-red-950",
            icon: "mdi:pot",
            pros: "Mejor cocción lenta. Preciosa estética.",
            cons: "Muy cara. Esmalte frágil a golpes secos.",
            tip: "Perfecta para guisos interminables. El esmalte permite cocinar ácidos (tomate) sin problemas.",
        },
    };

    const LOGIC = {
        sear: { lazy: "stainless", care: "stainless", ritual: "castiron" },
        delicate: { lazy: "nonstick", care: "nonstick", ritual: "carbon" },
        stew: { lazy: "stainless", care: "enameled", ritual: "enameled" },
        fast: { lazy: "stainless", care: "stainless", ritual: "carbon" },
    };

    function update() {
        const progress = (STATE.style ? 50 : 0) + (STATE.maint ? 50 : 0);
        document.getElementById("progress-bar").style.width = `${progress}%`;

        if (!STATE.style || !STATE.maint) return;

        const key = LOGIC[STATE.style][STATE.maint];
        const data = DB[key];

        const cardGrad = document.getElementById("card-grad");
        cardGrad.className = `absolute inset-0 bg-gradient-to-br transition-all duration-1000 ${data.grad}`;

        document.getElementById("res-name").textContent = data.name;
        document.getElementById("res-tag").textContent = data.tag;
        document.getElementById("res-pros").textContent = data.pros;
        document.getElementById("res-cons").textContent = data.cons;
        document.getElementById("res-tip").textContent = `"${data.tip}"`;
        document.getElementById("res-details").classList.remove("hidden");

        document.getElementById("icon-placeholder").classList.add("hidden");
        document.querySelectorAll(".result-icon").forEach((el) => el.classList.add("hidden"));
        const targetIcon = document.getElementById(`icon-${key}`);
        if (targetIcon) targetIcon.classList.remove("hidden");
    }

    document.querySelectorAll(".style-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
            document
                .querySelectorAll(".style-btn")
                .forEach((b) =>
                    b.classList.remove(
                        "active",
                        "border-indigo-500",
                        "bg-indigo-50",
                        "dark:bg-indigo-900/10"
                    )
                );
            btn.classList.add(
                "active",
                "border-indigo-500",
                "bg-indigo-50",
                "dark:bg-indigo-900/10"
            );
            STATE.style = btn.dataset.value;
            update();
        });
    });

    document.querySelectorAll(".maint-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
            document
                .querySelectorAll(".maint-btn")
                .forEach((b) =>
                    b.classList.remove(
                        "active",
                        "border-indigo-500",
                        "bg-indigo-50",
                        "dark:bg-indigo-900/10"
                    )
                );
            btn.classList.add(
                "active",
                "border-indigo-500",
                "bg-indigo-50",
                "dark:bg-indigo-900/10"
            );
            STATE.maint = btn.dataset.value;
            update();
        });
    });
</script>

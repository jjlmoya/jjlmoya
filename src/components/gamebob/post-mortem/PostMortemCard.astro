---
import { Icon } from "astro-icon/components";
import type { PostMortemEntry } from "../../../data/gamebob/post-mortem/entries";

interface Props {
    entry: PostMortemEntry;
}

const { entry } = Astro.props;
---

<a
    href={`/gamebob/post-mortem/${entry.id}/`}
    class="block relative p-8 rounded-2xl bg-slate-900/50 border border-white/5 hover:border-red-500/30 transition-all duration-300 group hover:-translate-y-1 hover:shadow-xl"
>
    <div
        class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
    >
        <Icon name="mdi:arrow-top-right" class="w-6 h-6 text-white/50" />
    </div>

    <div class="flex flex-col md:flex-row gap-8">
        <!-- Left: Error (The Suffering) -->
        <div class="flex-1 space-y-4">
            <div
                class="flex items-center gap-2 text-red-400 font-mono text-sm uppercase tracking-widest"
            >
                <Icon name="mdi:alert-circle-outline" class="w-5 h-5" />
                El Error
            </div>
            <p class="text-gray-300 leading-relaxed line-clamp-3">
                {entry.error}
            </p>
        </div>

        <!-- Divider (Mobile: Horizontal, Desktop: Vertical) -->
        <div class="hidden md:block w-px bg-white/10 self-stretch"></div>
        <div class="md:hidden h-px bg-white/10 w-full"></div>

        <!-- Right: Lesson (The Memorandum) -->
        <div class="flex-1 space-y-4">
            <div
                class="flex items-center gap-2 text-emerald-400 font-mono text-sm uppercase tracking-widest"
            >
                <Icon name="mdi:lightbulb-on-outline" class="w-5 h-5" />
                El Aprendizaje
            </div>
            <p class="text-gray-300 leading-relaxed line-clamp-3">
                {entry.lesson}
            </p>
        </div>
    </div>

    <!-- Footer: Meta info -->
    <div
        class="mt-8 pt-6 border-t border-white/5 flex flex-wrap items-center justify-between gap-4"
    >
        <h2 class="text-xl font-bold text-white group-hover:text-red-400 transition-colors">
            {entry.title}
        </h2>

        <div class="flex items-center gap-4 text-sm text-gray-500">
            <time datetime={entry.date} class="font-mono">
                {entry.date}
            </time>
            {
                entry.tags && (
                    <div class="flex gap-2">
                        {entry.tags.map((tag) => (
                            <span class="px-2 py-1 rounded-full bg-white/5 text-xs">#{tag}</span>
                        ))}
                    </div>
                )
            }
        </div>
    </div>
</a>
